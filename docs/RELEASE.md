<!-- START doctoc generated TOC please keep comment here to allow auto update -->
<!-- DON'T EDIT THIS SECTION, INSTEAD RE-RUN doctoc TO UPDATE -->

**Contents**

- [RegretsReporter Release Process](#regretsreporter-release-process)
  - [Create release builds](#create-release-builds)
  - [Upload and get approval of the artifacts](#upload-and-get-approval-of-the-artifacts)
    - [AMO (addons.mozilla.org)](#amo-addonsmozillaorg)
    - [CWS - Chrome Web Store](#cws---chrome-web-store)

<!-- END doctoc generated TOC please keep comment here to allow auto update -->

# RegretsReporter Release Process

## Create release builds

- Create a new branch with the name: `release-x.y.z`
- If there are smaller additions/features to be included in this release that doesn't need a separate PR each for them, commit those changes to this branch
- Bump the version in `package.json`, using commit message `Bump version to x.y.z`
- Create a PR using the new branch with name `Release x.y.z` ([Example](https://github.com/mozilla-extensions/regrets-reporter/pull/18))
- Enter release notes in the PR's description
- Circle CI will produce extension builds that can be tested and/or uploaded to AMO and CWS (see below)
- Fix any smaller issues encountered during testing
- At some point, decide that the release is final and merge the PR (can be done the minute before uploading the new versions to AMO and CWS for instance)
- Create a new release using GitHub's interface, calling it `vx.y.z` (the version number prefixed with `v`)
- Continue below

## Upload and get approval of the artifacts

### AMO (addons.mozilla.org)

- Log in to AMO
- Go to https://addons.mozilla.org/en-US/developers/addons and click RegretsReporter
- Choose `Upload New Version`
- Upload the latest Firefox build created by Circle CI
- If not already done, make sure to merge the release PR above and create the new release at this point
- When asked to upload the source code, upload the zip file generated by GitHub attached to the new release
- AMO reviewers may want to see the release PR and/or a GitHub diff between the previously published version and the new release
- The new release will be live once AMO review is ready and approved

### CWS - Chrome Web Store

- Log in to CWS
- Upload the latest Chrome build created by Circle CI
- After uploading you get to choose whether to publish the new version as soon as it is approved, or to manually publish the new version after it has been approved
- Wait for approval
- Publish the new version if not previously chosen to be published automatically
- The new release is live
